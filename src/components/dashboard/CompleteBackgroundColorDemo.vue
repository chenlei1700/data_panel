<template>
  <div class="complete-demo">
    <h1>TableComponent å®Œæ•´èƒŒæ™¯è‰²åŠŸèƒ½æ¼”ç¤º</h1>
    
    <!-- æ–°å¢å‡½æ•°æ¼”ç¤º -->
    <div class="section">
      <h2>ğŸ†• æ–°å¢å‡½æ•°æ¼”ç¤º</h2>
      
      <!-- æŠ€æœ¯æŒ‡æ ‡åˆ†æ -->
      <div class="demo-card">
        <h3>æŠ€æœ¯æŒ‡æ ‡ç»¼åˆè¯„åˆ† (technicalAnalysis)</h3>
        <p class="description">
          åŸºäºRSIã€MACDã€KDJã€ç§»åŠ¨å¹³å‡çº¿ã€æˆäº¤é‡ç­‰å¤šä¸ªæŠ€æœ¯æŒ‡æ ‡è¿›è¡Œç»¼åˆè¯„åˆ†ï¼Œä¸ºè‚¡ç¥¨æŠ€æœ¯é¢å¼ºå¼±æä¾›ç›´è§‚çš„é¢œè‰²æ ‡è¯†ã€‚
        </p>
        <div class="api-info">
          <strong>API:</strong> <code>/api/table-data/technical-analysis</code>
        </div>
        <TableComponent
          dataSource="/api/table-data/technical-analysis"
          table-class="demo-table"
        />
      </div>

      <!-- å¸‚å€¼è§„æ¨¡åˆ†æ -->
      <div class="demo-card">
        <h3>å¸‚å€¼è§„æ¨¡ç€è‰² (marketCapSize)</h3>
        <p class="description">
          æ ¹æ®è‚¡ç¥¨å¸‚å€¼è§„æ¨¡è¿›è¡Œåˆ†ç±»ç€è‰²ï¼Œä»å¾®ç›˜è‚¡åˆ°è¶…å¤§ç›˜è‚¡å…±7ä¸ªå±‚çº§ï¼Œä¾¿äºå¿«é€Ÿè¯†åˆ«ä¸åŒè§„æ¨¡çš„è‚¡ç¥¨ã€‚
        </p>
        <div class="api-info">
          <strong>API:</strong> <code>/api/table-data/market-cap</code>
        </div>
        <TableComponent
          dataSource="/api/table-data/market-cap"
          table-class="demo-table"
        />
      </div>
    </div>

    <!-- ç°æœ‰å‡½æ•°æ¼”ç¤º -->
    <div class="section">
      <h2>ğŸ“Š ç°æœ‰å‡½æ•°æ¼”ç¤º</h2>
      
      <!-- åŸºç¡€å‡½æ•° -->
      <div class="demo-card">
        <h3>åŸºç¡€èƒŒæ™¯è‰²å‡½æ•°</h3>
        <div class="grid-container">
          <div class="grid-item">
            <h4>çƒ­åŠ›å›¾ (heatmap)</h4>
            <TableComponent
              :apiData="heatmapData"
              table-class="small-table"
            />
          </div>
          <div class="grid-item">
            <h4>çº¢ç»¿è‰²é˜¶ (redGreen)</h4>
            <TableComponent
              :apiData="redGreenData"
              table-class="small-table"
            />
          </div>
          <div class="grid-item">
            <h4>ç™¾åˆ†æ¯”è‰²é˜¶ (percentage)</h4>
            <TableComponent
              :apiData="percentageData"
              table-class="small-table"
            />
          </div>
          <div class="grid-item">
            <h4>ç­‰çº§è‰²é˜¶ (rank)</h4>
            <TableComponent
              :apiData="rankData"
              table-class="small-table"
            />
          </div>
        </div>
      </div>

      <!-- é«˜çº§è‡ªå®šä¹‰å‡½æ•° -->
      <div class="demo-card">
        <h3>é«˜çº§è‡ªå®šä¹‰å‡½æ•°</h3>
        <div class="advanced-functions">
          <div class="function-demo">
            <h4>è‚¡ç¥¨å¼ºåŠ¿åº¦ (stockStrength)</h4>
            <TableComponent
              :apiData="stockStrengthData"
              table-class="demo-table"
            />
          </div>
          
          <div class="function-demo">
            <h4>ä»·æ ¼åŒºé—´ (priceRange)</h4>
            <TableComponent
              :apiData="priceRangeData"
              table-class="demo-table"
            />
          </div>
          
          <div class="function-demo">
            <h4>æ¶¨åœæ¿æ¢¯åº¦ (limitUpGradient)</h4>
            <TableComponent
              :apiData="limitUpData"
              table-class="demo-table"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- å®æ—¶æ•°æ®æ¼”ç¤º -->
    <div class="section">
      <h2>ğŸ”„ å®æ—¶æ•°æ®æ¼”ç¤º</h2>
      
      <div class="demo-card">
        <h3>æ¿å—æ•°æ® (å®æ—¶API)</h3>
        <TableComponent
          dataSource="/api/table-data/plates"
          table-class="demo-table"
        />
      </div>

      <div class="demo-card">
        <h3>è‚¡ç¥¨æ•°æ® (å®æ—¶API)</h3>
        <TableComponent
          dataSource="/api/table-data/stocks"
          table-class="demo-table"
        />
      </div>
    </div>

    <!-- é¢œè‰²å›¾ä¾‹è¯´æ˜ -->
    <div class="section">
      <h2>ğŸ¨ é¢œè‰²å›¾ä¾‹è¯´æ˜</h2>
      
      <div class="legend-container">
        <div class="legend-group">
          <h4>æŠ€æœ¯æŒ‡æ ‡ç»¼åˆè¯„åˆ†</h4>
          <div class="legend-items">
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(220, 20, 60, 0.9);"></span>
              <span>æŠ€æœ¯é¢æå¼º (â‰¥8åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 69, 0, 0.8);"></span>
              <span>æŠ€æœ¯é¢å¼ºåŠ¿ (â‰¥6åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 140, 0, 0.7);"></span>
              <span>æŠ€æœ¯é¢åå¼º (â‰¥4åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 215, 0, 0.6);"></span>
              <span>æŠ€æœ¯é¢ä¸­æ€§åå¼º (â‰¥2åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(240, 248, 255, 0.4);"></span>
              <span>æŠ€æœ¯é¢ä¸­æ€§ (â‰¥0åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 182, 193, 0.5);"></span>
              <span>æŠ€æœ¯é¢åå¼± (â‰¥-2åˆ†)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(176, 196, 222, 0.7);"></span>
              <span>æŠ€æœ¯é¢å¼±åŠ¿ (<-2åˆ†)</span>
            </div>
          </div>
        </div>

        <div class="legend-group">
          <h4>å¸‚å€¼è§„æ¨¡åˆ†ç±»</h4>
          <div class="legend-items">
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(72, 61, 139, 0.5);"></span>
              <span>è¶…å¤§ç›˜è‚¡ (>5000äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(0, 0, 205, 0.5);"></span>
              <span>å¤§ç›˜è‚¡ (1000-5000äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(30, 144, 255, 0.4);"></span>
              <span>ä¸­å¤§ç›˜è‚¡ (500-1000äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(0, 191, 255, 0.4);"></span>
              <span>ä¸­ç›˜è‚¡ (100-500äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(135, 206, 250, 0.4);"></span>
              <span>ä¸­å°ç›˜è‚¡ (50-100äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 255, 224, 0.6);"></span>
              <span>å°ç›˜è‚¡ (20-50äº¿)</span>
            </div>
            <div class="legend-item">
              <span class="color-sample" style="background: rgba(255, 192, 203, 0.6);"></span>
              <span>å¾®ç›˜è‚¡ (<20äº¿)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ä½¿ç”¨æŒ‡å— -->
    <div class="section">
      <h2>ğŸ“– ä½¿ç”¨æŒ‡å—</h2>
      
      <div class="guide-container">
        <div class="guide-item">
          <h4>1. æœåŠ¡å™¨ç«¯é…ç½®</h4>
          <pre><code>columns = [
  {
    "field": "stock_name",
    "header": "è‚¡ç¥¨åç§°",
    "backgroundColor": "technicalAnalysis"
  },
  {
    "field": "market_cap", 
    "header": "å¸‚å€¼",
    "backgroundColor": "marketCapSize"
  }
]</code></pre>
        </div>

        <div class="guide-item">
          <h4>2. å‰ç«¯ç›´æ¥é…ç½®</h4>
          <pre><code>const tableData = {
  columns: [
    {
      field: 'rsi',
      title: 'RSIæŒ‡æ ‡',
      backgroundColor: 'technicalAnalysis'
    }
  ],
  rows: [...]
};</code></pre>
        </div>

        <div class="guide-item">
          <h4>3. æ”¯æŒçš„å‡½æ•°åˆ—è¡¨</h4>
          <ul>
            <li><strong>åŸºç¡€å‡½æ•°:</strong> heatmap, redGreen, percentage, rank</li>
            <li><strong>é«˜çº§å‡½æ•°:</strong> stockStrength, priceRange, limitUpGradient, relativePerformance</li>
            <li><strong>æ–°å¢å‡½æ•°:</strong> technicalAnalysis, marketCapSize</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import TableComponent from './TableComponent.vue';

// åŸºç¡€å‡½æ•°æ¼”ç¤ºæ•°æ®
const heatmapData = ref({
  columns: [
    { field: 'name', title: 'åç§°' },
    { field: 'value', title: 'æ•°å€¼', backgroundColor: 'heatmap' }
  ],
  rows: [
    { name: 'é¡¹ç›®A', value: 85 },
    { name: 'é¡¹ç›®B', value: 92 },
    { name: 'é¡¹ç›®C', value: 76 },
    { name: 'é¡¹ç›®D', value: 68 }
  ]
});

const redGreenData = ref({
  columns: [
    { field: 'name', title: 'åç§°' },
    { field: 'change', title: 'æ¶¨è·Œå¹…', backgroundColor: 'redGreen' }
  ],
  rows: [
    { name: 'è‚¡ç¥¨A', change: 5.2 },
    { name: 'è‚¡ç¥¨B', change: -2.8 },
    { name: 'è‚¡ç¥¨C', change: 1.5 },
    { name: 'è‚¡ç¥¨D', change: -0.9 }
  ]
});

const percentageData = ref({
  columns: [
    { field: 'name', title: 'åç§°' },
    { field: 'percent', title: 'ç™¾åˆ†æ¯”', backgroundColor: 'percentage' }
  ],
  rows: [
    { name: 'æŒ‡æ ‡A', percent: 75 },
    { name: 'æŒ‡æ ‡B', percent: 45 },
    { name: 'æŒ‡æ ‡C', percent: 88 },
    { name: 'æŒ‡æ ‡D', percent: 32 }
  ]
});

const rankData = ref({
  columns: [
    { field: 'name', title: 'åç§°' },
    { field: 'score', title: 'è¯„åˆ†', backgroundColor: 'rank' }
  ],
  rows: [
    { name: 'é€‰æ‰‹A', score: 95 },
    { name: 'é€‰æ‰‹B', score: 87 },
    { name: 'é€‰æ‰‹C', score: 92 },
    { name: 'é€‰æ‰‹D', score: 79 }
  ]
});

// é«˜çº§å‡½æ•°æ¼”ç¤ºæ•°æ®
const stockStrengthData = ref({
  columns: [
    { field: 'stock_name', title: 'è‚¡ç¥¨åç§°' },
    { field: 'change', title: 'æ¶¨å¹…(%)', backgroundColor: 'stockStrength' },
    { field: 'volume_ratio', title: 'é‡æ¯”', backgroundColor: 'stockStrength' },
    { field: 'å¼€ç›˜æ¢æ‰‹ç‡', title: 'æ¢æ‰‹ç‡', backgroundColor: 'stockStrength' }
  ],
  rows: [
    { stock_name: 'å¼ºåŠ¿è‚¡A', change: 8.5, volume_ratio: 3.2, å¼€ç›˜æ¢æ‰‹ç‡: 12.5 },
    { stock_name: 'æ™®é€šè‚¡B', change: 2.1, volume_ratio: 1.5, å¼€ç›˜æ¢æ‰‹ç‡: 4.2 },
    { stock_name: 'å¼±åŠ¿è‚¡C', change: -3.2, volume_ratio: 0.6, å¼€ç›˜æ¢æ‰‹ç‡: 1.8 }
  ]
});

const priceRangeData = ref({
  columns: [
    { field: 'stock_name', title: 'è‚¡ç¥¨åç§°' },
    { field: 'price', title: 'è‚¡ä»·', backgroundColor: 'priceRange' }
  ],
  rows: [
    { stock_name: 'è´µå·èŒ…å°', price: 1680 },
    { stock_name: 'äº”ç²®æ¶²', price: 128 },
    { stock_name: 'ä¸­å°ç›˜è‚¡', price: 25 },
    { stock_name: 'ä½ä»·è‚¡', price: 6.5 }
  ]
});

const limitUpData = ref({
  columns: [
    { field: 'stock_name', title: 'è‚¡ç¥¨åç§°' },
    { field: 'è¿æ¿æ•°', title: 'è¿æ¿æ•°', backgroundColor: 'limitUpGradient' }
  ],
  rows: [
    { stock_name: 'è¿æ¿é¾™å¤´', è¿æ¿æ•°: 5 },
    { stock_name: 'ä¸‰æ¿è‚¡', è¿æ¿æ•°: 3 },
    { stock_name: 'äºŒæ¿è‚¡', è¿æ¿æ•°: 2 },
    { stock_name: 'é¦–æ¿è‚¡', è¿æ¿æ•°: 1 }
  ]
});
</script>

<style scoped>
.complete-demo {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
  background-color: #f8f9fa;
}

.complete-demo h1 {
  color: #2c3e50;
  text-align: center;
  margin-bottom: 30px;
  font-size: 2.5em;
  border-bottom: 3px solid #3498db;
  padding-bottom: 15px;
}

.section {
  margin-bottom: 40px;
  background: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.section h2 {
  color: #34495e;
  margin-bottom: 20px;
  font-size: 1.8em;
  display: flex;
  align-items: center;
  gap: 10px;
}

.demo-card {
  margin-bottom: 30px;
  padding: 20px;
  border: 1px solid #e0e6ed;
  border-radius: 8px;
  background-color: #fafbfc;
}

.demo-card h3 {
  color: #2980b9;
  margin-bottom: 10px;
  font-size: 1.4em;
}

.description {
  color: #666;
  margin-bottom: 15px;
  line-height: 1.6;
  font-size: 14px;
}

.api-info {
  margin-bottom: 15px;
  padding: 8px 12px;
  background-color: #e8f4f8;
  border-radius: 4px;
  font-size: 13px;
}

.api-info code {
  background-color: #d1ecf1;
  padding: 2px 6px;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.grid-item {
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 6px;
  background-color: white;
}

.grid-item h4 {
  color: #27ae60;
  margin-bottom: 10px;
  font-size: 1.1em;
}

.advanced-functions {
  display: flex;
  flex-direction: column;
  gap: 25px;
}

.function-demo h4 {
  color: #8e44ad;
  margin-bottom: 15px;
  font-size: 1.2em;
}

.legend-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 30px;
  margin-top: 20px;
}

.legend-group {
  padding: 20px;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  background-color: white;
}

.legend-group h4 {
  color: #495057;
  margin-bottom: 15px;
  font-size: 1.2em;
  border-bottom: 2px solid #28a745;
  padding-bottom: 5px;
}

.legend-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
}

.color-sample {
  width: 20px;
  height: 15px;
  border: 1px solid #ccc;
  border-radius: 3px;
  display: inline-block;
}

.guide-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 25px;
  margin-top: 20px;
}

.guide-item {
  padding: 20px;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  background-color: white;
}

.guide-item h4 {
  color: #fd7e14;
  margin-bottom: 15px;
  font-size: 1.1em;
}

.guide-item pre {
  background-color: #f8f9fa;
  padding: 15px;
  border-radius: 5px;
  overflow-x: auto;
  font-size: 13px;
  border: 1px solid #e9ecef;
}

.guide-item ul {
  padding-left: 20px;
}

.guide-item li {
  margin-bottom: 8px;
  line-height: 1.5;
}

:deep(.demo-table) {
  margin-top: 15px;
  border: 1px solid #dee2e6;
  border-radius: 6px;
}

:deep(.small-table) {
  font-size: 12px;
}

:deep(.demo-table th) {
  background-color: #f8f9fa;
  font-weight: 600;
  color: #495057;
}

:deep(.demo-table td),
:deep(.demo-table th) {
  padding: 10px 12px;
  border: 1px solid #dee2e6;
  text-align: center;
}

:deep(.small-table td),
:deep(.small-table th) {
  padding: 6px 8px;
  font-size: 11px;
}
</style>
